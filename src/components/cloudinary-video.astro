---
import {
	webmVideo,
	hevcVideo,
	mp4Video,
	thumnail,
} from "$src/js/cloudinary.js";

const { publicId } = Astro.props;
const webmUrl = webmVideo(publicId);
const hevcUrl = hevcVideo(publicId);
const mp4Url = mp4Video(publicId);
const posterUrl = thumnail(publicId);

const props = Object.assign({}, Astro.props);
delete props.publicId;
---

<video preload="none" poster={posterUrl} {...props}>
	<source src={hevcUrl} type="video/mp4; codecs='hvc1'" />
	<source src={webmUrl} type="video/webm" />
	<source src={mp4Url} type="video/mp4" />
</video>
